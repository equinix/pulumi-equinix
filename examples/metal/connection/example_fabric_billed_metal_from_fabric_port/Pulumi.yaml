# WARNING: This is an autogenerated file - manual changes will be overwritten if not made via ./scripts/generate_examples.sh
name: equinix-metal-connection-example_fabric_billed_metal_from_fabric_port
runtime: yaml
resources:
  example:
    type: equinix:metal:Vlan
    properties:
      projectId: <metal_project_id>
      metro: FR
  exampleInterconnection:
    type: equinix:metal:Interconnection
    name: example
    properties:
      name: tf-metal-from-port
      projectId: <metal_project_id>
      type: shared
      redundancy: primary
      metro: FR
      speed: 200Mbps
      serviceTokenType: z_side
      contactEmail: username@example.com
      vlans:
        - ${example.vxlan}
  exampleConnection:
    type: equinix:fabric:Connection
    name: example
    properties:
      name: tf-metal-from-port
      type: EVPL_VC
      bandwidth: '200'
      notifications:
        - type: ALL
          emails:
            - username@example.com
      order:
        purchaseOrderNumber: 1-323292
      project:
        projectId: <fabric_project_id>
      aSide:
        accessPoint:
          type: COLO
          port:
            uuid: ${aSide.data[0].uuid}
          linkProtocol:
            type: DOT1Q
            vlanTag: 1234
      zSide:
        serviceToken:
          uuid: ${exampleInterconnection.serviceTokens[0].id}
variables:
  aSide:
    fn::invoke:
      Function: equinix:fabric:getPorts
      Arguments:
        filter:
          name: <name_of_port||port_prefix>
