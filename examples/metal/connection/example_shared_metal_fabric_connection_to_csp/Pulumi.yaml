# WARNING: This is an autogenerated file - manual changes will be overwritten if not made via ./scripts/generate_examples.sh
name: equinix-metal-connection-example_shared_metal_fabric_connection_to_csp
runtime: yaml
resources:
  example1:
    type: equinix:metal:Vlan
    properties:
      projectId: ${myProjectId}
      metro: SV
  example:
    type: equinix:metal:Interconnection
    properties:
      name: tf-port-to-metal-legacy
      projectId: ${myProjectId}
      metro: SV
      redundancy: primary
      type: shared_port_vlan
      contactEmail: username@example.com
      vlans:
        - ${example1.vxlan}
  exampleConnection:
    type: equinix:fabric:Connection
    name: example
    properties:
      name: tf-NIMF-metal-2-aws-legacy
      type: EVPL_VC
      notifications:
        - type: ALL
          emails: sername@example.com
      project:
        projectId: ${fabricProjectId}
      bandwidth: '200'
      order:
        purchaseOrderNumber: 1-323292
      aSide:
        accessPoint:
          type: METAL_NETWORK
          authenticationKey: ${example.authorizationCode}
      zSide:
        accessPoint:
          type: SP
          authenticationKey: ${awsAccountId}
          sellerRegion: us-west-1
          profile:
            type: L2_PROFILE
            uuid: ${zside.id}
          location:
            metroCode: SV
variables:
  zside:
    fn::invoke:
      Function: equinix:fabric:getServiceProfiles
      Arguments:
        filter:
          property: /name
          operator: =
          values:
            - AWS Direct Connect
