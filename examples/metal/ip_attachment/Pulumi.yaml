# WARNING: This is an autogenerated file - manual changes will be overwritten if not made via ./scripts/generate_examples.sh
name: equinix-metal-ip_attachment
runtime: yaml
resources:
  # Reserve /30 block of max 2 public IPv4 addresses in metro ny for myproject
  myblock:
    type: equinix:metal:ReservedIpBlock
    properties:
      projectId: ${projectId}
      metro: ny
      quantity: 2
  # Assign /32 subnet (single address) from reserved block to a device
  firstAddressAssignment:
    type: equinix:metal:IpAttachment
    name: first_address_assignment
    properties:
      deviceId: ${mydevice.id}
      cidrNotation:
        fn::invoke:
          Function: std:join
          Arguments:
            separator: /
            input:
              - fn::invoke:
                  Function: std:cidrhost
                  Arguments:
                    input: ${myblockMetalReservedIpBlock.cidrNotation}
                    host: 0
                  Return: result
              - '32'
          Return: result
