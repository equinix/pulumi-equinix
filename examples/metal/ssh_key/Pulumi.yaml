# WARNING: This is an autogenerated file - manual changes will be overwritten if not made via ./scripts/generate_examples.sh
name: equinix-metal-ssh_key
runtime: yaml
resources:
  # Create a new SSH key
  key1:
    type: equinix:metal:SshKey
    properties:
      name: terraform-1
      publicKey:
        fn::invoke:
          function: std:file
          arguments:
            input: /home/terraform/.ssh/id_rsa.pub
          return: result
  # Create new device with "key1" included. The device resource "depends_on" the
  # key, in order to make sure the key is created before the device.
  test:
    type: equinix:metal:Device
    properties:
      hostname: test-device
      plan: c3.small.x86
      metro: sv
      operatingSystem: ubuntu_20_04
      billingCycle: hourly
      projectId: ${projectId}
    options:
      dependsOn:
        - ${key1}
